# Ralph Progress Log

## Codebase Patterns
<!-- Ralph will add discovered patterns here -->

---

## Iterations

### Iteration: 2026-01-14
**Story:** US-040 - Change video preload to metadata
**Status:** Complete (Already Implemented)

**What was done:**
- Verified TextMedia.tsx already has `preload="metadata"` (line 30)
- Verified ProductCarousel.tsx uses MediaItem component which defaults to `videoPreload="metadata"`
- MediaItem.tsx (line 23) has default `videoPreload = 'metadata'`
- Confirmed no `preload="auto"` exists anywhere in the codebase
- Verified in browser: homepage video and product carousel videos use `preload="metadata"`
- Build passes successfully

**Files verified (no changes needed):**
- apps/website/app/components/sections/TextMedia.tsx (already has preload="metadata")
- apps/website/app/components/ProductCarousel.tsx (uses MediaItem)
- apps/website/app/components/MediaItem.tsx (defaults to preload="metadata")

**Learnings for future iterations:**
- MediaItem component was created in US-035/US-036 with `videoPreload="metadata"` as default
- TextMedia.tsx was already updated to use metadata preload in a previous iteration
- Some video components (ProductReviews, ImageBanner) use `preload="none"` which is even more aggressive
- Always check if stories might already be implemented before making changes

### Iteration: 2026-01-14
**Story:** US-041 - Add font preload links
**Status:** Complete

**What was done:**
- Added preload links for `founders.woff2` and `itc-std.woff2` to root.tsx `links()` function
- Each link includes: `rel="preload"`, `as="font"`, `type="font/woff2"`, `crossOrigin="anonymous"`
- Verified in browser using chrome-devtools MCP - both preload links present with correct attributes
- Build passes successfully

**Files changed:**
- apps/website/app/root.tsx

**Learnings for future iterations:**
- React Router 7 uses `links()` function export to add link elements to the head
- The `links()` function returns an array of link descriptor objects
- Font preload links need `crossOrigin="anonymous"` even for same-origin fonts due to CORS requirements for fonts
- Pre-existing typecheck errors in packages/ui/ and packages/hooks/ (missing @types/react) - these are documented in previous PRD notes
- Website-specific build command (`pnpm run build` in apps/website) is sufficient to verify changes

### Iteration: 2026-01-14
**Story:** US-042 - Remove unused @wakey/utils package
**Status:** Complete

**What was done:**
- Verified @wakey/utils package was empty (only contained placeholder comment in index.ts)
- Verified no imports from @wakey/utils exist in the codebase (grep found no matches)
- Verified @wakey/utils was not in apps/website/package.json dependencies
- Deleted packages/utils/ directory
- Updated CLAUDE.md monorepo structure documentation
- Updated README.md packages table
- Ran `pnpm install` - completes successfully (5 workspace projects remaining)
- Build passes successfully

**Files changed:**
- packages/utils/ (deleted)
- CLAUDE.md
- README.md

**Learnings for future iterations:**
- Check if packages are actually used (grep for imports) before deletion
- pnpm-workspace.yaml uses glob pattern `packages/*` so no update needed after removing a package
- The pre-existing typecheck errors in packages/ui and packages/hooks are unrelated to the utils removal

### Iteration: 2026-01-14
**Story:** US-043 - Verify and document Hero component status
**Status:** Complete

**What was done:**
- Investigated Hero.tsx usage - found it's exported from sections/index.ts but not used anywhere
- The only reference to `<Hero` is in CLAUDE.md as documentation example
- FeaturedProduct.tsx is used instead for homepage hero (shows text heading)
- Hero.tsx shows Wakey logo - distinct purpose from FeaturedProduct
- Added JSDoc TODO comment explaining status: retained for future logo-centric hero pages
- Build passes successfully

**Files changed:**
- apps/website/app/components/sections/Hero.tsx

**Learnings for future iterations:**
- Hero and FeaturedProduct serve different purposes: Hero=logo hero, FeaturedProduct=text hero
- CLAUDE.md documents Hero as an available MDX section - it's designed for future use
- When documenting component status, compare with similar components to understand design intent
- Components can be retained if they serve a distinct purpose even when currently unused

